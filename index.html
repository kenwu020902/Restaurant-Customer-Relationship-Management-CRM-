<!DOCTYPE html>
<html>
<head>
    <title>üçï Restaurant CRM - Simple Version</title>
    <style>
        /* Reset everything */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* Body styling */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        /* Main container */
        .app-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        
        /* Header */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #f0f0f0;
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
        }
        
        .header p {
            color: #7f8c8d;
            margin-top: 10px;
        }
        
        /* Form styling */
        .form-container {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #2c3e50;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .form-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-group input:focus {
            border-color: #6a11cb;
            outline: none;
            box-shadow: 0 0 0 3px rgba(106, 17, 203, 0.1);
        }
        
        /* Buttons */
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .save-btn {
            background: linear-gradient(to right, #00b09b, #96c93d);
            color: white;
        }
        
        .save-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 176, 155, 0.4);
        }
        
        .clear-btn {
            background: #e74c3c;
            color: white;
        }
        
        .clear-btn:hover {
            background: #c0392b;
        }
        
        /* Customer list */
        .customer-list {
            margin-top: 40px;
        }
        
        .customer-list h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        
        .customer-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }
        
        .customer-card:hover {
            border-color: #6a11cb;
            transform: translateX(5px);
        }
        
        .customer-card.frequent {
            border-left: 6px solid #f39c12;
            background: #fff9e6;
        }
        
        .customer-card .name {
            font-size: 1.3em;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .customer-card .phone {
            color: #3498db;
            margin: 5px 0;
        }
        
        .customer-card .postcode {
            color: #27ae60;
            margin: 5px 0;
        }
        
        .customer-card .usual-order {
            color: #e74c3c;
            margin: 5px 0;
            font-weight: bold;
        }
        
        .customer-card .order-count {
            display: inline-block;
            background: #6a11cb;
            color: white;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-top: 10px;
        }
        
        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 40px;
            color: #95a5a6;
            border: 2px dashed #bdc3c7;
            border-radius: 10px;
        }
        
        /* Responsive */
        @media (max-width: 600px) {
            .app-container {
                padding: 15px;
            }
            
            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- HEADER -->
        <div class="header">
            <h1>üçΩÔ∏è Restaurant CRM</h1>
            <p>Simple customer management for restaurants and takeaways</p>
        </div>
        
        <!-- ADD CUSTOMER FORM -->
        <div class="form-container">
            <h2>‚ûï Add New Customer</h2>
            
            <div class="form-group">
                <label for="customerName">Full Name *</label>
                <input type="text" id="customerName" placeholder="e.g., John Smith" required>
            </div>
            
            <div class="form-group">
                <label for="phone">Phone Number *</label>
                <input type="tel" id="phone" placeholder="e.g., 07123 456789" required>
            </div>
            
            <div class="form-group">
                <label for="postcode">Postcode</label>
                <input type="text" id="postcode" placeholder="e.g., SW1A 1AA">
                <button type="button" onclick="lookupPostcode()" style="margin-left:10px;">
                üîç Find Address
                </button>
            </div>
            
            <div class="form-group">
                <label for="usualOrder">Usual Order</label>
                <input type="text" id="usualOrder" placeholder="e.g., Large Pepperoni Pizza, Coke">
            </div>
            
            <div class="button-group">
                <button class="save-btn" onclick="saveCustomer()">
                    üíæ Save Customer
                </button>
                <button class="clear-btn" onclick="clearForm()">
                    üóëÔ∏è Clear Form
                </button>
            </div>
        </div>
        
        <!-- CUSTOMER LIST -->
        <div class="customer-list">
            <h2>üìã Saved Customers (<span id="customerCount">0</span>)</h2>
            <div id="customersContainer">
                <div class="empty-state" id="emptyState">
                    <p style="font-size: 1.2em; margin-bottom: 10px;">No customers yet</p>
                    <p>Add your first customer using the form above!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ALL JAVASCRIPT IS HERE - NO SEPARATE FILES -->
    <script>
        // POSTCODE LOOKUP WITH GOOGLE PLACES INTEGRATION
async function lookupPostcode() {
    const postcodeInput = document.getElementById('postcode');
    let postcode = postcodeInput.value.trim().toUpperCase();
    
    if (!postcode) {
        alert('üì≠ Please enter a UK postcode first!\n\nExamples:\nSW1A 1AA (London)\nBT7 1EX (Belfast)\nEH1 1RE (Edinburgh)');
        return;
    }
    
    const lookupBtn = event?.target || document.querySelector('[onclick="lookupPostcode()"]');
    const originalText = lookupBtn.innerHTML;
    
    // Show loading
    lookupBtn.innerHTML = '‚è≥ Searching...';
    lookupBtn.disabled = true;
    
    try {
        // Clean postcode
        const cleanPostcode = postcode.replace(/\s+/g, '');
        
        // 1. FIRST: Get basic info from Postcodes.io
        const postcodeResponse = await fetch(`https://api.postcodes.io/postcodes/${cleanPostcode}`);
        const postcodeData = await postcodeResponse.json();
        
        if (postcodeData.status !== 200) {
            alert(`‚ùå Postcode "${postcode}" not found.`);
            return;
        }
        
        const result = postcodeData.result;
        
        // 2. SHOW ADDRESS SELECTION OPTIONS
        showAddressSelectionDialog(postcode, result);
        
        // 3. Show area info
        showPostcodeMessage(`üìç ${postcode} found in ${result.region || result.country}`, 'success');
        
    } catch (error) {
        console.error('Error:', error);
        alert('‚ö†Ô∏è Could not fetch address information.');
        
    } finally {
        // Reset button
        lookupBtn.innerHTML = originalText;
        lookupBtn.disabled = false;
    }
}

// SHOW ADDRESS SELECTION DIALOG
function showAddressSelectionDialog(postcode, areaData) {
    // Remove any existing dialog
    const existingDialog = document.getElementById('addressSelectionDialog');
    if (existingDialog) existingDialog.remove();
    
    // Create dialog
    const dialog = document.createElement('div');
    dialog.id = 'addressSelectionDialog';
    dialog.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        z-index: 10000;
        padding: 25px;
        min-width: 500px;
        max-width: 90vw;
        max-height: 80vh;
        overflow-y: auto;
    `;
    
    // Build dialog content
    let content = `
        <div style="text-align: center; margin-bottom: 20px;">
            <h2 style="color: #333; margin-bottom: 5px;">üìç ${postcode}</h2>
            <p style="color: #666;">${areaData.region || areaData.country || 'UK'}</p>
        </div>
        
        <div style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
            <h3 style="color: #333; margin-bottom: 10px;">üìç Area Information</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div><strong>Region:</strong> ${areaData.region || 'N/A'}</div>
                <div><strong>Country:</strong> ${areaData.country || 'N/A'}</div>
                <div><strong>District:</strong> ${areaData.admin_district || 'N/A'}</div>
                <div><strong>Ward:</strong> ${areaData.admin_ward || 'N/A'}</div>
                <div><strong>Constituency:</strong> ${areaData.parliamentary_constituency || 'N/A'}</div>
                <div><strong>Post Town:</strong> ${areaData.post_town || 'N/A'}</div>
            </div>
        </div>
        
        <div style="margin-bottom: 25px;">
            <h3 style="color: #333; margin-bottom: 15px;">üè† Choose Address Option</h3>
            
            <!-- OPTION 1: AREA-LEVEL ADDRESS -->
            <div style="margin-bottom: 15px; padding: 15px; border: 2px solid #4CAF50; border-radius: 10px; cursor: pointer;"
                 onclick="selectAddressOption('area')">
                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                    <div style="background: #4CAF50; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 10px;">1</div>
                    <strong style="color: #333;">Area-Level Address</strong>
                </div>
                <p style="color: #666; margin: 0; padding-left: 40px;">
                    ${areaData.admin_district || areaData.region || 'Area'}, ${areaData.post_town || ''}<br>
                    ${areaData.country || 'UK'}<br>
                    ${postcode}
                </p>
                <small style="color: #999; padding-left: 40px; display: block; margin-top: 5px;">
                    (Recommended for deliveries to general area)
                </small>
            </div>
            
            <!-- OPTION 2: CUSTOM ADDRESS -->
            <div style="margin-bottom: 15px; padding: 15px; border: 2px solid #2196F3; border-radius: 10px; cursor: pointer;"
                 onclick="selectAddressOption('custom')">
                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                    <div style="background: #2196F3; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 10px;">2</div>
                    <strong style="color: #333;">Enter Custom Address</strong>
                </div>
                <p style="color: #666; margin: 0; padding-left: 40px;">
                    Enter house number, street name, and other details manually
                </p>
                <small style="color: #999; padding-left: 40px; display: block; margin-top: 5px;">
                    (For exact delivery addresses)
                </small>
            </div>
            
            <!-- OPTION 3: POPULAR LOCATIONS IN AREA -->
            <div style="padding: 15px; border: 2px solid #9C27B0; border-radius: 10px; cursor: pointer;"
                 onclick="showPopularLocations('${postcode}', '${areaData.admin_district || areaData.region || ''}')">
                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                    <div style="background: #9C27B0; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 10px;">3</div>
                    <strong style="color: #333;">Select Popular Location</strong>
                </div>
                <p style="color: #666; margin: 0; padding-left: 40px;">
                    Choose from known places in this area (universities, hospitals, etc.)
                </p>
                <small style="color: #999; padding-left: 40px; display: block; margin-top: 5px;">
                    (For common delivery destinations)
                </small>
            </div>
        </div>
        
        <!-- GOOGLE MAPS LINK -->
        <div style="text-align: center; margin-top: 20px;">
            <a href="https://www.google.com/maps/search/${encodeURIComponent(postcode)}" 
               target="_blank"
               style="display: inline-block; background: #34A853; color: white; padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: bold; margin-right: 10px;">
               üó∫Ô∏è Search on Google Maps
            </a>
            
            <button onclick="document.getElementById('addressSelectionDialog').remove()" 
                    style="background: #666; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold;">
                Cancel
            </button>
        </div>
    `;
    
    dialog.innerHTML = content;
    document.body.appendChild(dialog);
}

// SELECT ADDRESS OPTION
function selectAddressOption(optionType) {
    const dialog = document.getElementById('addressSelectionDialog');
    const postcode = dialog.querySelector('h2').textContent.replace('üìç ', '');
    const areaInfo = dialog.querySelector('p').textContent;
    
    dialog.remove();
    
    switch(optionType) {
        case 'area':
            // Use area-level address
            const areaAddress = `${areaInfo}\n${postcode}`;
            updateAddressField(areaAddress);
            showPostcodeMessage('‚úÖ Area address selected', 'success');
            break;
            
        case 'custom':
            // Show custom address form
            showCustomAddressForm(postcode, areaInfo);
            break;
    }
}

// SHOW CUSTOM ADDRESS FORM
function showCustomAddressForm(postcode, areaInfo) {
    const formHTML = `
        <div id="customAddressForm" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); z-index: 10001; min-width: 400px;">
            <h3 style="color: #333; margin-bottom: 20px;">üè† Enter Exact Address</h3>
            
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; color: #666;">House/Flat Number</label>
                <input type="text" id="houseNumber" placeholder="e.g., 10 or Flat 3A" 
                       style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px;">
            </div>
            
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; color: #666;">Street Name</label>
                <input type="text" id="streetName" placeholder="e.g., Main Street" 
                       style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px;">
            </div>
            
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; color: #666;">Area/Neighborhood</label>
                <input type="text" id="areaName" value="${areaInfo}" 
                       style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px;">
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 5px; color: #666;">Additional Details</label>
                <textarea id="addressNotes" rows="2" placeholder="Building name, landmarks, delivery instructions" 
                          style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; font-family: inherit;"></textarea>
            </div>
            
            <div style="display: flex; justify-content: space-between;">
                <button onclick="saveCustomAddress()" 
                        style="background: #4CAF50; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold;">
                    ‚úÖ Save Address
                </button>
                
                <button onclick="document.getElementById('customAddressForm').remove()" 
                        style="background: #666; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">
                    Cancel
                </button>
            </div>
        </div>
    `;
    
    // Remove existing form
    const existingForm = document.getElementById('customAddressForm');
    if (existingForm) existingForm.remove();
    
    // Add new form
    document.body.insertAdjacentHTML('beforeend', formHTML);
}

// SAVE CUSTOM ADDRESS
function saveCustomAddress() {
    const houseNumber = document.getElementById('houseNumber').value.trim();
    const streetName = document.getElementById('streetName').value.trim();
    const areaName = document.getElementById('areaName').value.trim();
    const notes = document.getElementById('addressNotes').value.trim();
    
    if (!streetName) {
        alert('Please enter at least a street name');
        return;
    }
    
    // Build full address
    let fullAddress = '';
    if (houseNumber) fullAddress += houseNumber + ' ';
    fullAddress += streetName + '\n';
    if (areaName) fullAddress += areaName + '\n';
    if (notes) fullAddress += notes + '\n';
    
    // Get postcode from the original dialog
    const originalPostcode = document.querySelector('#addressSelectionDialog h2')?.textContent.replace('üìç ', '') || '';
    if (originalPostcode) fullAddress += originalPostcode;
    
    // Remove forms
    document.getElementById('customAddressForm')?.remove();
    document.getElementById('addressSelectionDialog')?.remove();
    
    // Update address field
    updateAddressField(fullAddress);
    showPostcodeMessage('‚úÖ Custom address saved', 'success');
}

// SHOW POPULAR LOCATIONS
function showPopularLocations(postcode, area) {
    // Based on postcode prefix, show relevant locations
    const locations = getPopularLocationsForArea(postcode, area);
    
    let locationsHTML = '<div style="text-align: center; padding: 20px;">';
    locationsHTML += `<h3 style="color: #333; margin-bottom: 15px;">üìç Popular Places in ${area || postcode}</h3>`;
    
    locations.forEach(location => {
        locationsHTML += `
            <button onclick="selectLocation('${location.address}', '${location.name}')"
                    style="background: #FF9800; color: white; border: none; padding: 12px; margin: 5px; border-radius: 8px; cursor: pointer; width: 100%; text-align: left;">
                <strong>${location.name}</strong><br>
                <small>${location.type}</small>
            </button>
        `;
    });
    
    locationsHTML += '<br><br><button onclick="this.parentElement.parentElement.remove()" style="background: #666; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Back</button>';
    locationsHTML += '</div>';
    
    // Update dialog content
    const dialog = document.getElementById('addressSelectionDialog');
    if (dialog) {
        dialog.innerHTML = locationsHTML;
    }
}

// GET POPULAR LOCATIONS FOR AREA
function getPopularLocationsForArea(postcode, area) {
    // Example locations based on postcode area
    if (postcode.startsWith('BT7')) {
        return [
            { name: 'Queen\'s University Belfast', type: 'University', address: 'Queen\'s University Belfast\nUniversity Road\nBelfast\nBT7 1EX' },
            { name: 'Belfast City Hospital', type: 'Hospital', address: 'Belfast City Hospital\nLisburn Road\nBelfast\nBT7 1EX' },
            { name: 'Botanic Gardens', type: 'Park', address: 'Botanic Gardens\nStranmillis Road\nBelfast\nBT7 1EX' }
        ];
    } else if (postcode.startsWith('SW1A')) {
        return [
            { name: '10 Downing Street', type: 'Government', address: '10 Downing Street\nLondon\nSW1A 2AA' },
            { name: 'Buckingham Palace', type: 'Royal Residence', address: 'Buckingham Palace\nLondon\nSW1A 1AA' }
        ];
    }
    
    // Default locations
    return [
        { name: `${area || 'Local'} Post Office`, type: 'Post Office', address: `Main Post Office\n${area || ''}\n${postcode}` },
        { name: `${area || 'Area'} Shopping Centre`, type: 'Shopping', address: `Shopping Centre\n${area || ''}\n${postcode}` }
    ];
}

// SELECT LOCATION
function selectLocation(address, name) {
    document.getElementById('addressSelectionDialog')?.remove();
    updateAddressField(address);
    showPostcodeMessage(`‚úÖ ${name} selected`, 'success');
}

// UPDATE ADDRESS FIELD
function updateAddressField(address) {
    let addressField = document.getElementById('address');
    
    if (!addressField) {
        // Create address field
        const postcodeGroup = document.getElementById('postcode').parentElement;
        const addressHTML = `
            <div class="form-group" style="margin-top: 15px;">
                <label for="address" style="color: #4CAF50; font-weight: bold;">
                    üìç Delivery Address
                </label>
                <textarea id="address" rows="4" 
                          style="width: 100%; padding: 12px; border: 2px solid #4CAF50; border-radius: 8px; font-family: inherit; background: #f8fff8;"
                          placeholder="Address will appear here">${address}</textarea>
            </div>
        `;
        postcodeGroup.insertAdjacentHTML('afterend', addressHTML);
    } else {
        // Update existing field
        addressField.value = address;
        addressField.style.borderColor = '#4CAF50';
        addressField.style.backgroundColor = '#f8fff8';
    }
}

// ADD CSS ANIMATIONS FOR MESSAGES
if (!document.querySelector('#postcode-animations')) {
    const style = document.createElement('style');
    style.id = 'postcode-animations';
    style.textContent = `
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-20px); }
        }
    `;
    document.head.appendChild(style);
}         
// Validate required fields
            if (!name || !phone) {
                alert('‚ö†Ô∏è Please fill in at least Name and Phone Number!');
                return;
            }
            
// Create customer object
            const customer = {
                id: Date.now(), // Unique ID based on timestamp
                name: name,
                phone: phone,
                postcode: postcode || 'Not provided',
                usualOrder: usualOrder || 'Not specified',
                orderCount: 1,
                dateAdded: new Date().toLocaleDateString('en-GB', {
                    day: '2-digit',
                    month: 'short',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                })
            };
            
            // Add to array
            customers.push(customer);
            
            // Save to browser storage
            saveToStorage();
            
            // Clear the form
            clearForm();
            
            // Update display
            displayCustomer(customer);
            updateCustomerCount();
            
            // Show success message
            showMessage(`‚úÖ ${name} saved successfully!`, 'success');
        }
        
        // DISPLAY A CUSTOMER IN THE LIST
        function displayCustomer(customer) {
            // Hide empty state message
            document.getElementById('emptyState').style.display = 'none';
            
            // Create customer card
            const card = document.createElement('div');
            card.className = 'customer-card';
            
            // Add "frequent" class if they order pizza
            if (customer.usualOrder.toLowerCase().includes('pizza')) {
                card.classList.add('frequent');
            }
            
            // Fill card with customer info
            card.innerHTML = `
                <div class="name">${customer.name}</div>
                <div class="phone">üìû ${customer.phone}</div>
                <div class="postcode">üìÆ ${customer.postcode}</div>
                <div class="usual-order">üçΩÔ∏è ${customer.usualOrder}</div>
                <div>
                    <span class="order-count">${customer.orderCount} order${customer.orderCount !== 1 ? 's' : ''}</span>
                    <small style="color: #95a5a6; margin-left: 10px;">Added: ${customer.dateAdded}</small>
                </div>
                <button onclick="deleteCustomer(${customer.id})" style="
                    background: #e74c3c;
                    color: white;
                    border: none;
                    padding: 5px 15px;
                    border-radius: 5px;
                    margin-top: 10px;
                    cursor: pointer;
                ">Delete</button>
            `;
            
            // Add to the top of the list
            const container = document.getElementById('customersContainer');
            container.insertBefore(card, container.firstChild);
        }
        
        // DELETE A CUSTOMER
        function deleteCustomer(customerId) {
            if (confirm('Are you sure you want to delete this customer?')) {
                // Remove from array
                customers = customers.filter(customer => customer.id !== customerId);
                
                // Save to storage
                saveToStorage();
                
                // Refresh display
                refreshCustomerList();
                updateCustomerCount();
                
                showMessage('üóëÔ∏è Customer deleted', 'info');
            }
        }
        
        // REFRESH ENTIRE CUSTOMER LIST
        function refreshCustomerList() {
            const container = document.getElementById('customersContainer');
            container.innerHTML = '';
            
            if (customers.length === 0) {
                document.getElementById('emptyState').style.display = 'block';
            } else {
                document.getElementById('emptyState').style.display = 'none';
                // Display all customers (newest first)
                [...customers].reverse().forEach(displayCustomer);
            }
        }
        
        // CLEAR THE FORM
        function clearForm() {
            document.getElementById('customerName').value = '';
            document.getElementById('phone').value = '';
            document.getElementById('postcode').value = '';
            document.getElementById('usualOrder').value = '';
        }
        
        // UPDATE CUSTOMER COUNT
        function updateCustomerCount() {
            document.getElementById('customerCount').textContent = customers.length;
        }
        
        // SHOW TEMPORARY MESSAGE
        function showMessage(text, type) {
            // Create message element
            const message = document.createElement('div');
            message.textContent = text;
            message.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                border-radius: 10px;
                color: white;
                font-weight: bold;
                z-index: 1000;
                animation: slideIn 0.3s ease;
                ${type === 'success' ? 'background: #27ae60;' : 'background: #3498db;'}
            `;
            
            // Add to page
            document.body.appendChild(message);
            
            // Remove after 3 seconds
            setTimeout(() => {
                message.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => message.remove(), 300);
            }, 3000);
        }
        
        // SAVE TO BROWSER'S LOCAL STORAGE
        function saveToStorage() {
            localStorage.setItem('restaurantCustomers', JSON.stringify(customers));
        }
        
        // LOAD FROM BROWSER'S LOCAL STORAGE
        function loadFromStorage() {
            const saved = localStorage.getItem('restaurantCustomers');
            if (saved) {
                customers = JSON.parse(saved);
                refreshCustomerList();
            }
        }
        
        // ADD SOME SAMPLE CUSTOMERS IF EMPTY
        function addSampleCustomers() {
            if (customers.length === 0) {
                const sampleCustomers = [
                    {
                        id: 1,
                        name: "John Smith",
                        phone: "07123456789",
                        postcode: "SW1A 1AA",
                        usualOrder: "Large Pepperoni Pizza, Coke",
                        orderCount: 15,
                        dateAdded: "15 Jan 2024, 14:30"
                    },
                    {
                        id: 2,
                        name: "Sarah Johnson",
                        phone: "07456789123",
                        postcode: "W1J 7NT",
                        usualOrder: "Chicken Tikka Masala, Naan Bread",
                        orderCount: 8,
                        dateAdded: "10 Jan 2024, 18:45"
                    },
                    {
                        id: 3,
                        name: "Mike Wilson",
                        phone: "07987654321",
                        postcode: "EC1A 1BB",
                        usualOrder: "Fish & Chips, Peas",
                        orderCount: 3,
                        dateAdded: "12 Jan 2024, 12:15"
                    }
                ];
                
                customers = sampleCustomers;
                saveToStorage();
                refreshCustomerList();
                updateCustomerCount();
                
                showMessage('‚ú® Sample customers loaded!', 'success');
            }
        }
        
        // LOOKUP ADDRESS FROM POSTCODE (SIMULATED)
        function lookupAddress() {
            const postcode = document.getElementById('postcode').value.trim();
            if (!postcode) {
                alert('Please enter a postcode first');
                return;
            }
            
            // Simulated address lookup
            const addresses = {
                'SW1A 1AA': '10 Downing Street, London',
                'W1J 7NT': '23 Regent Street, London',
                'EC1A 1BB': 'St Paul\'s Cathedral, London',
                'B1 1BB': 'Bullring, Birmingham',
                'M1 1AB': 'Manchester Arndale, Manchester'
            };
            
            if (addresses[postcode.toUpperCase()]) {
                alert(`üìç Address for ${postcode}:\n${addresses[postcode.toUpperCase()]}`);
            } else {
                alert(`üìç No address found for ${postcode}\n\n(Try: SW1A 1AA, W1J 7NT, EC1A 1BB)`);
            }
        }
        
        // Add CSS animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
    
    <!-- SIMPLE FOOTER -->
    <div style="
        text-align: center;
        color: white;
        margin-top: 30px;
        font-size: 0.9em;
        opacity: 0.8;
    ">
        <p>Restaurant CRM v1.0 | Data saves in your browser | 
           <button onclick="addSampleCustomers()" style="
               background: transparent;
               border: 1px solid white;
               color: white;
               padding: 5px 15px;
               border-radius: 20px;
               margin-left: 10px;
               cursor: pointer;
           ">Load Sample Data</button>
        </p>
    </div>
</body>
</html>
